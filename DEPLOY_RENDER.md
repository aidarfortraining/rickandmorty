# üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Rick and Morty –Ω–∞ Render.com

## –ü—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: Database tables –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ 500 –æ—à–∏–±–∫–∞–º.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## üõ† –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `build.sh`
```bash
# –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è build –ø—Ä–æ—Ü–µ—Å—Å–∞
python manage.py makemigrations main
python manage.py migrate
# –°–æ–∑–¥–∞–µ—Ç —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `render.yaml`
```yaml
# –ò–∑–º–µ–Ω–µ–Ω startCommand –Ω–∞ –ø—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ gunicorn
startCommand: "gunicorn rick_and_morty_app.wsgi:application"
# –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω DEBUG=False –¥–ª—è production
```

### 3. –£–ª—É—á—à–µ–Ω middleware
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ë–î
- –ò—Å–∫–ª—é—á–µ–Ω health endpoint –∏–∑ –ø—Ä–æ–≤–µ—Ä–æ–∫
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 503 –µ—Å–ª–∏ –ë–î –Ω–µ –≥–æ—Ç–æ–≤–∞

### 4. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ views
- –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- –õ—É—á—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `build.sh` - —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ `render.yaml` - —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º startCommand  
- ‚úÖ `main/middleware.py` - —É–ª—É—á—à–µ–Ω–Ω—ã–π
- ‚úÖ `main/views.py` - —Å fallback –ª–æ–≥–∏–∫–æ–π

### –®–∞–≥ 2: –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```bash
chmod +x build.sh
chmod +x start.sh
chmod +x debug_migration.py
```

### –®–∞–≥ 3: –ö–æ–º–º–∏—Ç –∏ –ø—É—à
```bash
git add .
git commit -m "Fix database initialization on Render.com"
git push origin main
```

### –®–∞–≥ 4: –†–µ–¥–µ–ø–ª–æ–π –Ω–∞ Render
1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å Render.com
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å `rickandmorty`
3. –ù–∞–∂–º–∏—Ç–µ "Manual Deploy" ‚Üí "Deploy latest commit"
4. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ build –ø—Ä–æ—Ü–µ—Å—Å–∞

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. [Health check](https://rickandmorty-n0mo.onrender.com/health/) - –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å "healthy"
2. [–ü–æ–∏—Å–∫](https://rickandmorty-n0mo.onrender.com/search/?q=Rick&type=character) - –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
3. [–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞](https://rickandmorty-n0mo.onrender.com/) - –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "unhealthy":
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ debug —Å–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω–æ
python debug_migration.py
```

### –ï—Å–ª–∏ –ø–æ–∏—Å–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ API –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ middleware –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
python manage.py sync_data --limit 2
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
- ‚úÖ Health check status: "healthy"
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –ë–î: main_character, main_episode, main_location
- ‚úÖ –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ 500 –æ—à–∏–±–æ–∫
- ‚úÖ Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ health endpoint
2. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏**: –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ PostgreSQL –¥–ª—è production
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
4. **CDN**: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

---

**–í–∞–∂–Ω–æ**: –ü—Ä–∏ –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ –º–æ–¥–µ–ª—è—Ö –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ:
```bash
python manage.py makemigrations
python manage.py migrate
```
